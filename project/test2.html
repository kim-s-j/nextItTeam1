<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test2</title>
  </head>
  <body>
    <div
      id="map"
      style="width: 100%; height: 100%; position: relative; overflow: hidden"
    ></div>
    <form onsubmit="searchPlaces(); return false;">
      최대 45개의 검색결과
      <br />
      키워드 :
      <input type="text" value="대전" id="keyWord" size="15" />
      <button type="submit" onclick="Onclick()">검색하기</button>
    </form>

    <script
      type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2b1d221a9ab0ae17753f1dbe531ba206&libraries=services"
    ></script>
    <script>
      var places = new kakao.maps.services.Places();
      let placesKeyWord = document.getElementById("keyWord").value;
      let placeArr = [];
      function Onclick() {
        placesKeyWord = document.getElementById("keyWord").value;
      }
      var callback = function (result, status) {
        placeArr = [];
        if (status === kakao.maps.services.Status.OK) {
          result.forEach((element) => {
            for (const [key, value] of Object.entries(element)) {
              if (element[key].includes(placesKeyWord)) {
                if (value === "address_name") {
                  placeArr.push([key, value]);
                } else if (key === "road_address_name") {
                  placeArr.push([key, value]);
                } else if (key === "place_name") {
                  placeArr.push([key, value]);
                }
              }
            }
          });
        }
        console.log(result);
      };
      function searchPlaces() {
        console.log(places);
        places.keywordSearch(`${placesKeyWord}빽다방`, callback, {
          page: 1,
          size: 3,
        });
        return 0;
      }
    </script>
  </body>
</html>
